cmake_minimum_required(VERSION 3.6)

project(BillyFrontier_Android)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_C_STANDARD 17)

# Pomme settings (must be set before add_subdirectory)
set(POMME_NO_GRAPHICS true)
set(POMME_NO_INPUT    true)
set(POMME_NO_MP3      false)
set(POMME_NO_QD3D     true)
set(POMME_NO_VIDEO    true)
add_compile_definitions(POMME_CASE_SENSITIVE_FSSPEC=1)

# Pomme is placed at app/jni/Pomme during CI setup
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/../Pomme Pomme_build EXCLUDE_FROM_ALL)

# Glob all game source files (Source/ was copied here)
file(GLOB_RECURSE GAME_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp
)

# Build as a shared library for Android (required by SDL)
add_library(main SHARED ${GAME_SOURCES})

target_include_directories(main PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/Headers
)

target_compile_options(main PRIVATE
    -fexceptions
    -Wall
    -Wno-multichar
    -Wno-unknown-pragmas
    -Wno-unused-parameter
)

target_link_libraries(main PRIVATE SDL3::SDL3 Pomme)
